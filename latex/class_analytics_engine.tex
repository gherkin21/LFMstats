\doxysection{Analytics\+Engine Class Reference}
\hypertarget{class_analytics_engine}{}\label{class_analytics_engine}\index{AnalyticsEngine@{AnalyticsEngine}}


Performs various calculations and statistical analysis on a list of scrobble data.  




{\ttfamily \#include $<$analyticsengine.\+h$>$}

Inheritance diagram for Analytics\+Engine\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_analytics_engine}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_analytics_engine_ae3e0671ff5957d720efb67154dc00162}{Analytics\+Engine}} (QObject \texorpdfstring{$\ast$}{*}parent=nullptr)
\begin{DoxyCompactList}\small\item\em Constructs an \doxylink{class_analytics_engine}{Analytics\+Engine} instance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts}} \mbox{\hyperlink{class_analytics_engine_a319dd1bfec62f711af388ed54c0a69d1}{get\+Top\+Artists}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles, int count=50)
\begin{DoxyCompactList}\small\item\em Calculates the top artists based on play counts. \end{DoxyCompactList}\item 
\mbox{\hyperlink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts}} \mbox{\hyperlink{class_analytics_engine_ae20d62bcb2527c9c895249401e4a2a61}{get\+Top\+Tracks}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles, int count=50)
\begin{DoxyCompactList}\small\item\em Calculates the top tracks based on play counts. \end{DoxyCompactList}\item 
QDate\+Time \mbox{\hyperlink{class_analytics_engine_a368d537fab8fb71f973ba62c25fbb11d}{find\+Last\+Played}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles, const QString \&artist, const QString \&track)
\begin{DoxyCompactList}\small\item\em Finds the timestamp of the last time a specific track by a specific artist was played. \end{DoxyCompactList}\item 
QMap$<$ QString, int $>$ \mbox{\hyperlink{class_analytics_engine_a307276ff5a20914bf89e86d1300c2f05}{get\+Artist\+Play\+Counts}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Calculates the total play count for each artist. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_analytics_engine_aa4a5bdf04df84d065cdf48d430d59d53}{get\+Mean\+Scrobbles\+Per\+Day}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles, const QDate\+Time \&from, const QDate\+Time \&to)
\begin{DoxyCompactList}\small\item\em Calculates the average number of scrobbles per day within a given date range. \end{DoxyCompactList}\item 
QDate\+Time \mbox{\hyperlink{class_analytics_engine_aec0edeb8f4dd330f2147f77f24264a30}{get\+First\+Scrobble\+Date}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Gets the timestamp of the earliest scrobble in the list. \end{DoxyCompactList}\item 
QDate\+Time \mbox{\hyperlink{class_analytics_engine_a079ec42c0be963727d57a22767661eb1}{get\+Last\+Scrobble\+Date}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Gets the timestamp of the latest scrobble in the list. \end{DoxyCompactList}\item 
QVector$<$ int $>$ \mbox{\hyperlink{class_analytics_engine_abc9d8cda8733db2f92bb1319f7195aae}{get\+Scrobbles\+Per\+Hour\+Of\+Day}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Calculates the total number of scrobbles for each hour of the day (local time). \end{DoxyCompactList}\item 
QVector$<$ int $>$ \mbox{\hyperlink{class_analytics_engine_a60904bba34ef1d196dbcc0170bbe1848}{get\+Scrobbles\+Per\+Day\+Of\+Week}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Calculates the total number of scrobbles for each day of the week (local time). \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_listening_streak}{Listening\+Streak}} \mbox{\hyperlink{class_analytics_engine_a589c898e8e33c3a9f8d3f3648720d715}{calculate\+Listening\+Streaks}} (const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&scrobbles)
\begin{DoxyCompactList}\small\item\em Calculates the longest and current consecutive day listening streaks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T$>$ }\\static QList$<$ QPair$<$ QString, T $>$ $>$ \mbox{\hyperlink{class_analytics_engine_ab8f49dd1f67e077b373f2668595bf1f5}{sort\+Map\+By\+Value}} (const QMap$<$ QString, T $>$ \&map)
\begin{DoxyCompactList}\small\item\em Helper template function to sort a QMap by its values (descending). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Performs various calculations and statistical analysis on a list of scrobble data. 

Provides methods to calculate top artists/tracks, find last played times, calculate listening streaks, determine mean scrobbles per day, and analyze listening patterns by time of day or day of week. Assumes input scrobble lists are sorted by timestamp (important for some calculations like first/last date). @inherits QObject 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_analytics_engine_ae3e0671ff5957d720efb67154dc00162}\index{AnalyticsEngine@{AnalyticsEngine}!AnalyticsEngine@{AnalyticsEngine}}
\index{AnalyticsEngine@{AnalyticsEngine}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{AnalyticsEngine()}{AnalyticsEngine()}}
{\footnotesize\ttfamily \label{class_analytics_engine_ae3e0671ff5957d720efb67154dc00162} 
Analytics\+Engine\+::\+Analytics\+Engine (\begin{DoxyParamCaption}\item[{QObject \texorpdfstring{$\ast$}{*}}]{parent}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructs an \doxylink{class_analytics_engine}{Analytics\+Engine} instance. 


\begin{DoxyParams}{Parameters}
{\em parent} & The parent QObject, defaults to nullptr. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_analytics_engine_a589c898e8e33c3a9f8d3f3648720d715}\index{AnalyticsEngine@{AnalyticsEngine}!calculateListeningStreaks@{calculateListeningStreaks}}
\index{calculateListeningStreaks@{calculateListeningStreaks}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{calculateListeningStreaks()}{calculateListeningStreaks()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a589c898e8e33c3a9f8d3f3648720d715} 
\mbox{\hyperlink{struct_listening_streak}{Listening\+Streak}} Analytics\+Engine\+::calculate\+Listening\+Streaks (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Calculates the longest and current consecutive day listening streaks. 

A "{}listening day"{} is defined by local time dates. The current streak requires listening on the current local date or the previous day. 
\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{struct_listening_streak}{Listening\+Streak} struct containing the calculated streak information. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_a368d537fab8fb71f973ba62c25fbb11d}\index{AnalyticsEngine@{AnalyticsEngine}!findLastPlayed@{findLastPlayed}}
\index{findLastPlayed@{findLastPlayed}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{findLastPlayed()}{findLastPlayed()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a368d537fab8fb71f973ba62c25fbb11d} 
QDate\+Time Analytics\+Engine\+::find\+Last\+Played (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{, }\item[{const QString \&}]{artist}{, }\item[{const QString \&}]{track}{}\end{DoxyParamCaption})}



Finds the timestamp of the last time a specific track by a specific artist was played. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to search (assumed sorted chronologically for efficiency, though not strictly required). \\
\hline
{\em artist} & The artist name (case-\/insensitive). \\
\hline
{\em track} & The track name (case-\/insensitive). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The QDate\+Time (UTC) of the last play, or an invalid QDate\+Time if not found. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_a307276ff5a20914bf89e86d1300c2f05}\index{AnalyticsEngine@{AnalyticsEngine}!getArtistPlayCounts@{getArtistPlayCounts}}
\index{getArtistPlayCounts@{getArtistPlayCounts}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getArtistPlayCounts()}{getArtistPlayCounts()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a307276ff5a20914bf89e86d1300c2f05} 
QMap$<$ QString, int $>$ Analytics\+Engine\+::get\+Artist\+Play\+Counts (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Calculates the total play count for each artist. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A QMap where keys are artist names and values are their total play counts. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_aec0edeb8f4dd330f2147f77f24264a30}\index{AnalyticsEngine@{AnalyticsEngine}!getFirstScrobbleDate@{getFirstScrobbleDate}}
\index{getFirstScrobbleDate@{getFirstScrobbleDate}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getFirstScrobbleDate()}{getFirstScrobbleDate()}}
{\footnotesize\ttfamily \label{class_analytics_engine_aec0edeb8f4dd330f2147f77f24264a30} 
QDate\+Time Analytics\+Engine\+::get\+First\+Scrobble\+Date (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Gets the timestamp of the earliest scrobble in the list. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data (assumed sorted by timestamp). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The QDate\+Time (UTC) of the first scrobble, or an invalid QDate\+Time if the list is empty or the first timestamp is invalid. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_a079ec42c0be963727d57a22767661eb1}\index{AnalyticsEngine@{AnalyticsEngine}!getLastScrobbleDate@{getLastScrobbleDate}}
\index{getLastScrobbleDate@{getLastScrobbleDate}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getLastScrobbleDate()}{getLastScrobbleDate()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a079ec42c0be963727d57a22767661eb1} 
QDate\+Time Analytics\+Engine\+::get\+Last\+Scrobble\+Date (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Gets the timestamp of the latest scrobble in the list. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data (assumed sorted by timestamp). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The QDate\+Time (UTC) of the last scrobble, or an invalid QDate\+Time if the list is empty or the last timestamp is invalid. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_aa4a5bdf04df84d065cdf48d430d59d53}\index{AnalyticsEngine@{AnalyticsEngine}!getMeanScrobblesPerDay@{getMeanScrobblesPerDay}}
\index{getMeanScrobblesPerDay@{getMeanScrobblesPerDay}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getMeanScrobblesPerDay()}{getMeanScrobblesPerDay()}}
{\footnotesize\ttfamily \label{class_analytics_engine_aa4a5bdf04df84d065cdf48d430d59d53} 
double Analytics\+Engine\+::get\+Mean\+Scrobbles\+Per\+Day (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{, }\item[{const QDate\+Time \&}]{from}{, }\item[{const QDate\+Time \&}]{to}{}\end{DoxyParamCaption})}



Calculates the average number of scrobbles per day within a given date range. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
{\em from\+UTC} & The start of the date range (UTC, inclusive). \\
\hline
{\em to\+UTC} & The end of the date range (UTC, exclusive). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The mean number of scrobbles per day, or 0.\+0 if the range is invalid or contains no scrobbles. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_a60904bba34ef1d196dbcc0170bbe1848}\index{AnalyticsEngine@{AnalyticsEngine}!getScrobblesPerDayOfWeek@{getScrobblesPerDayOfWeek}}
\index{getScrobblesPerDayOfWeek@{getScrobblesPerDayOfWeek}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getScrobblesPerDayOfWeek()}{getScrobblesPerDayOfWeek()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a60904bba34ef1d196dbcc0170bbe1848} 
QVector$<$ int $>$ Analytics\+Engine\+::get\+Scrobbles\+Per\+Day\+Of\+Week (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Calculates the total number of scrobbles for each day of the week (local time). 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A QVector$<$int$>$ of size 7, where index 0 represents Monday, index 1 Tuesday, ..., index 6 Sunday, containing the total counts for each day. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_abc9d8cda8733db2f92bb1319f7195aae}\index{AnalyticsEngine@{AnalyticsEngine}!getScrobblesPerHourOfDay@{getScrobblesPerHourOfDay}}
\index{getScrobblesPerHourOfDay@{getScrobblesPerHourOfDay}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getScrobblesPerHourOfDay()}{getScrobblesPerHourOfDay()}}
{\footnotesize\ttfamily \label{class_analytics_engine_abc9d8cda8733db2f92bb1319f7195aae} 
QVector$<$ int $>$ Analytics\+Engine\+::get\+Scrobbles\+Per\+Hour\+Of\+Day (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{}\end{DoxyParamCaption})}



Calculates the total number of scrobbles for each hour of the day (local time). 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A QVector$<$int$>$ of size 24, where index 0 represents 00\+:00-\/00\+:59, index 1 represents 01\+:00-\/01\+:59, etc., containing the total counts for each hour. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_a319dd1bfec62f711af388ed54c0a69d1}\index{AnalyticsEngine@{AnalyticsEngine}!getTopArtists@{getTopArtists}}
\index{getTopArtists@{getTopArtists}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getTopArtists()}{getTopArtists()}}
{\footnotesize\ttfamily \label{class_analytics_engine_a319dd1bfec62f711af388ed54c0a69d1} 
\mbox{\hyperlink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts}} Analytics\+Engine\+::get\+Top\+Artists (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{, }\item[{int}]{count}{ = {\ttfamily 50}}\end{DoxyParamCaption})}



Calculates the top artists based on play counts. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
{\em count} & The maximum number of top artists to return. If -\/1 or 0, returns all artists. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts} list containing pairs of artist names and their play counts, sorted descending by count. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_ae20d62bcb2527c9c895249401e4a2a61}\index{AnalyticsEngine@{AnalyticsEngine}!getTopTracks@{getTopTracks}}
\index{getTopTracks@{getTopTracks}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{getTopTracks()}{getTopTracks()}}
{\footnotesize\ttfamily \label{class_analytics_engine_ae20d62bcb2527c9c895249401e4a2a61} 
\mbox{\hyperlink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts}} Analytics\+Engine\+::get\+Top\+Tracks (\begin{DoxyParamCaption}\item[{const QList$<$ \mbox{\hyperlink{struct_scrobble_data}{Scrobble\+Data}} $>$ \&}]{scrobbles}{, }\item[{int}]{count}{ = {\ttfamily 50}}\end{DoxyParamCaption})}



Calculates the top tracks based on play counts. 


\begin{DoxyParams}{Parameters}
{\em scrobbles} & The list of scrobble data to analyze. \\
\hline
{\em count} & The maximum number of top tracks to return. If -\/1 or 0, returns all tracks. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \doxylink{analyticsengine_8h_a24440435af6d135e5ba61c2a05f55deb}{Sorted\+Counts} list containing pairs of track identifiers ("{}\+Artist -\/ Track"{}) and their play counts, sorted descending by count. 
\end{DoxyReturn}
\Hypertarget{class_analytics_engine_ab8f49dd1f67e077b373f2668595bf1f5}\index{AnalyticsEngine@{AnalyticsEngine}!sortMapByValue@{sortMapByValue}}
\index{sortMapByValue@{sortMapByValue}!AnalyticsEngine@{AnalyticsEngine}}
\doxysubsubsection{\texorpdfstring{sortMapByValue()}{sortMapByValue()}}
{\footnotesize\ttfamily \label{class_analytics_engine_ab8f49dd1f67e077b373f2668595bf1f5} 
template$<$typename T$>$ \\
QList$<$ QPair$<$ QString, T $>$ $>$ Analytics\+Engine\+::sort\+Map\+By\+Value (\begin{DoxyParamCaption}\item[{const QMap$<$ QString, T $>$ \&}]{map}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Helper template function to sort a QMap by its values (descending). 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & The value type in the map (must be comparable with \textquotesingle{}\texorpdfstring{$>$}{>}\textquotesingle{}). \\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em map} & The QMap to sort. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A QList of QPair$<$\+QString, T$>$ sorted by the T value in descending order. 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{analyticsengine_8h}{analyticsengine.\+h}}\item 
\mbox{\hyperlink{analyticsengine_8cpp}{analyticsengine.\+cpp}}\end{DoxyCompactItemize}
